# قالب تحويل الوحدات (UOM) للتاجر

هذا المجلد يحتوي ملفين CSV يمكن فتحهم مباشرة في Excel:

- `items.csv`: سطر واحد لكل صنف (لتحديد وحدة الأساس المطلوبة وملاحظات عامة).
- `uom_units.csv`: عدة أسطر لكل صنف (كل سطر = وحدة إضافية + عامل التحويل إلى وحدة الأساس).

## 1) طريقة التعبئة (مهم جدًا)

### ملف `items.csv`

- `identifier_type`: اكتب `item_id` أو `barcode` (اختر واحد فقط لكل صنف).
- `identifier_value`: قيمة الـ item_id أو الباركود.
- `item_name_ar`: اسم الصنف (للتأكد فقط).
- `desired_base_unit`: وحدة الأساس الجديدة (الأصغر).
  - أمثلة شائعة: `piece` للحبة/القطعة، `gram` أو `kg` للوزن.
- `legacy_purchase_unit` و `legacy_sales_unit`: ما كان التاجر يستخدمه قبل (اختياري لكن مفيد).
- `notes`: أي شرح إضافي.

### ملف `uom_units.csv`

لكل صنف، اكتب سطرًا لكل وحدة تريد إضافتها.

- `uom_code`: كود الوحدة (مثل: `pack`, `carton`, `box`, `bundle`, `case`, `bag`, ...).
- `qty_in_base`: كم وحدة أساس داخل هذه الوحدة.
  - مثال: إذا الأساس `piece` والباكت يحتوي 12 حبة → `qty_in_base = 12`
  - مثال: إذا الكرتون يحتوي 24 باكت وكل باكت 12 حبة → `qty_in_base = 288`
- `is_default_purchase`: `true/false` هل هذه هي وحدة الشراء الافتراضية للصنف؟
- `is_default_sales`: `true/false` هل هذه هي وحدة البيع الافتراضية للصنف؟
- `uom_name_ar` و `uom_name_en`: أسماء للعرض (اختياري).

## 2) قواعد مهمة لتفادي الأخطاء

- لكل صنف: اختر وحدة أساس واحدة فقط (الأصغر).
- يجب أن يكون `qty_in_base` رقمًا موجبًا (أكبر من 0).
- لا تخلط بين “قطعة” و “وزن” في نفس الصنف:
  - صنف أساسه `piece` لا تضف له `kg` كوحدة تحويل.
  - صنف أساسه `kg/gram` يمكن تضيف له `bag` مثلًا بشرط أن يكون “عدد كيلوجرامات” داخل الكيس.

## 3) أين تضع الملفات بعد أن يعبئها التاجر؟

ضع الملفين بعد تعبئتهم داخل:

`/uom-migration-template/`

بنفس الأسماء:
- `items.csv`
- `uom_units.csv`

ثم أبلغني، وسأجهز سكربت الترحيل ونشغّله على نسخة Staging أولًا ثم الإنتاج.
